# Ctrl-Alt-Play Panel

## Description
Ctrl-Alt-Play Panel is a distributed Panel+Agent control plane for managing server processes with real-time monitoring, RBAC, and deployment-agnostic infrastructure. This README is the single source of truth for getting started quickly in development and evaluating the project locally.

## Prerequisites
- Docker 20.10+ and Docker Compose (v2 recommended). The startup script auto-detects `docker compose` vs `docker-compose`.
- Node.js is not required for the quick start; only Docker is required.
- Ports: `3000` (Panel UI), `6379` (Redis), `5432` (Postgres) must be free for the default path.

## One-minute quick start (happy path)
1.  **Clone and enter the repo:**
    ```bash
    git clone https://github.com/yourusername/ctrl-alt-play-panel.git
    cd ctrl-alt-play-panel
    ```
2.  **Create your environment file (first run only):**
    ```bash
    cp .env.example .env
    ```
    *The startup will generate secure secrets if they are missing.*
3.  **Start everything with one command:**
    ```bash
    ./start-dev.sh
    ```
4.  **First login:**
    - Open http://localhost:3000
    - Default credentials:
        - Username: `admin`
        - Password: `admin123`
    - You will be prompted to change the password after login in Settings.

## What the single command does
- Picks a sensible default stack: Postgres + Redis + Panel UI
- Brings up containers and waits for health
- Applies database schema and seeds initial data
- Prints friendly status, endpoints, and next steps

## Verify installation worked
- **Check container status** (the script prints this automatically):
  ```bash
  docker compose ps
  ```
- **View application logs:**
  ```bash
  docker compose logs -f ctrl-alt-play
  ```
- **Hit health endpoint:**
  ```bash
  curl -sf http://localhost:3000/health
  ```
  *(Expects a 200 OK response)*
- **Open the UI:**
  - http://localhost:3000
- If any step fails, use the script's built-in commands:
  ```bash
  ./start-dev.sh --status
  ./start-dev.sh --logs ctrl-alt-play
  ```

## Configuration basics
- **Environment file:** `.env`
  - **Database:** `DATABASE_URL` (defaults to local Postgres container)
  - **Redis:** `REDIS_URL` (defaults to local Redis container)
  - **Secrets:** `JWT_SECRET` and `AGENT_SECRET` (autogenerated if missing on first run)
  - **Ports:** `PORT=3000` (panel), `AGENT_PORT=8080` (websocket)
- **Database type:**
  - The quick start uses Postgres. Other databases are supported; see advanced options.

## Common commands
- **Start (default):** `./start-dev.sh`
- **Stop:** `./start-dev.sh --stop`
- **Restart:** `./start-dev.sh --restart`
- **Status:** `./start-dev.sh --status`
- **Logs (app):** `./start-dev.sh --logs ctrl-alt-play`
- **Logs (db):** `./start-dev.sh --logs postgres`

## Advanced options (optional)
- **Choose a different database:** set `DB_TYPE` in `.env` to one of: `postgresql`, `mysql`, `mariadb`, `mongodb`, `sqlite`. The startup will select the appropriate compose profile.
- **Use a remote/external database:** set `DB_LOCAL=false` and provide `DATABASE_URL`.
- **Enable HTTPS with nginx and Let's Encrypt:**
  - After successful local run, see the optional SSL helper: [`easy-ssl-setup.sh`](easy-ssl-setup.sh)
  - You must set `DOMAIN` and `CERTBOT_EMAIL` environment variables before running it.
- **Production deployment:** see [`DEPLOYMENT_GUIDE.md`](docs/DEPLOYMENT_GUIDE.md) and [`memory-bank/deployment.md`](memory-bank/deployment.md)
- **API reference:** see [`API_DOCUMENTATION.md`](API_DOCUMENTATION.md)

## Troubleshooting quick tips
- **Port in use (e.g., 3000):** change `PORT` in `.env` and re-run `./start-dev.sh`
- **Compose command not found:** install Docker Compose v2 (`docker compose`) or v1 (`docker-compose`). The script will auto-detect either.
- **Database migration errors:** `./start-dev.sh --db-reset` (non-destructive for defaults; see script prompt)
- **Clean and re-run:** `./start-dev.sh --clean` then `./start-dev.sh`

## Links to more documentation
- Full installation and manual alternatives: [`INSTALLATION.md`](INSTALLATION.md)
- Production deployment guide: [`docs/DEPLOYMENT_GUIDE.md`](docs/DEPLOYMENT_GUIDE.md)
- Deployment architecture deep dive: [`memory-bank/deployment.md`](memory-bank/deployment.md)
- API documentation: [`API_DOCUMENTATION.md`](API_DOCUMENTATION.md)

## Notes for contributors
- This project uses TypeScript and follows the patterns in the memory bank:
  - System patterns: [`memory-bank/systemPatterns.md`](memory-bank/systemPatterns.md)
  - Testing strategy: [`memory-bank/testing.md`](memory-bank/testing.md)